---

- hosts: all
  become: true
  pre_tasks:

  - name: update repo cache
    tags: always
    package:
      update_cache: yes
    changed_when: false
    when: ansible_distribution in ["Debian", "Ubuntu"]  

- hosts: all
  become: true
  roles:
    - base

- hosts: workstations
  become: true
  roles:
    - workstations

- hosts: lxc
  become: true
  roles:
    - lxc

- hosts: media_handlers
  become: true
  roles:
    - media_h

- hosts: media_players
  become: true
  roles: 
    - media_p

- hosts: docs
  become: true
  roles:
    - docs  

  

#  - name: fetch remote public key
#    community.crypto.openssl_publickey_info:
#      path: /home/bill/.ssh/bill
#    register: bill_ssh

 # - name: append new key to authorized file
 #   ansible.builtin.lineinfile: 
 #     path: /home/bill/test/test_auth_file
 #     insertafter: EOF
 #     line: bill_ssh

  

  

  
    
  

